<script>
//TODO: drag and drop persist position?
$(function() {
	$('.thumbnails').sortable();
});
</script>

<div class="container" >
	<div class="row">
		<div class="span9">
			<div class="row">
			<!-- TODO: make directive for listing verses -->
			<div id="verses" ng-model="limit">
			<ul class="thumbnails">
				<li ng-repeat="verse in verses | filter:search | orderBy:order | limitTo:limit">
				<div class="span4 thumbnail">
					<span editable-text model="verse.title"></span>
					<a class="" ng-click="showMemorizeForm()" ng-model="isMemorizing" ng-hide="isMemorizing">memorize</a> 
					<a class="" ng-click="hideMemorizeForm()" ng-show="isMemorizing">review</a> 
					{{verse.memorized}} 
					<button class="btn btn-large close pull-right"  ng-click="removeVerse($index)">&times;</button>  
					<hr /> 
					<p>
					<div ng-hide="isMemorizing">
						<span editable-textarea model="verse.content"></span>
					</div>
					<div ng-bind-html-unsafe="diffResult" ng-hide="isMemorizing"></div>
					<form ng-submit="memorizeVerse()" ng-show="isMemorizing">
						<textarea rows="5" class="input-xlarge" ng-model="typedContent" placeholder="type verse to memorize"></textarea><br />
						<input type="submit" class="btn-primary" value="Submit">
					</form>
					</p>
				</div>
				</li>
			</ul>
			<div id="load-more" ng-show="limit < verses.length">
				<button ng-click="limit=limit+10">Load More</button>
				{{limit}} / {{verses.length}}
			</div>
		</div>
		</div>
		
		</div>
		<div class="span3">
			Search: <input type="text" class="span2" ng-model="search"><br />
			Sort by: 
			<select ng-model="order" class="span2">
				<option value="memorized">Memorization</option>
				<option value="title">Title</option>
			</select>
		</div>
	</div>
</div>

